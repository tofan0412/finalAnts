<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ants.com.board.memBoard.mapper.SuggestMapper">

<select id="readSuggestList" parameterType="ants.com.board.memBoard.model.SuggestVo" resultType="ants.com.board.memBoard.model.SuggestVo">
	SELECT A.SGT_ID, A.SGT_TITLE, A.SGT_CONT, 
           A.REG_DT, A.SGT_STATUS, A.CATEGORY_ID,
           A.DEL, A.TODO_ID,  B.MEM_ID, B.REQ_ID
	  FROM SUGGEST A, (SELECT TODO_ID, MEM_ID, REQ_ID
	                     FROM TODO 
	                    WHERE REQ_ID = #{reqId}) B
	 WHERE A.TODO_ID = B.TODO_ID
	   AND A.DEL = 'N'
</select>

<select id="searchTodo" parameterType="ants.com.board.manageBoard.model.TodoVo" resultType="ants.com.board.manageBoard.model.TodoVo">
	SELECT * 
	  FROM TODO
		<if test="todoTitle =='%%'">
	 WHERE MEM_ID = #{memId}
		</if>
		<if test="todoTitle != '%%'">
	 WHERE MEM_ID = #{memId}
	   AND TODO_TITLE LIKE #{todoTitle}	
		</if>
</select>

<insert id="suggestInsert" parameterType="ants.com.board.memBoard.model.SuggestVo">
INSERT INTO suggest (sgt_id,sgt_title,sgt_cont,
    					reg_dt,sgt_status,category_id,todo_id, del) 
				VALUES (
			    #{sgtId},#{sgtTitle},#{sgtCont},SYSDATE,
			    #{sgtStatus},#{categoryId},#{todoId},#{del})
</insert>

<select id="suggestDetail" parameterType="ants.com.board.memBoard.model.SuggestVo" resultType="ants.com.board.memBoard.model.SuggestVo">
	SELECT * 
	  FROM SUGGEST
	 WHERE SGT_ID = #{sgtId}
</select>

<update id="suggestMod" parameterType="ants.com.board.memBoard.model.SuggestVo">
	UPDATE SUGGEST
	   SET TODO_ID = #{todoId}, 
	       SGT_TITLE = #{sgtTitle},
	       SGT_CONT = #{sgtCont}
	 WHERE SGT_ID = #{sgtId} 
</update>

<update id="delSuggest" parameterType="ants.com.board.memBoard.model.SuggestVo">
UPDATE SUGGEST
       SET DEL = 'Y'
  WHERE SGT_ID = #{sgtId}
</update>

<select id="getSgtSeq" resultType="java.lang.String">
SELECT SGT_SEQ.NEXTVAL
  FROM DUAL
</select>


<select id="suggestFileList" parameterType="ants.com.board.memBoard.model.SuggestVo" resultType="ants.com.file.model.PublicFileVo">
SELECT * 
  FROM PUBLICFILE
 WHERE CATEGORY_ID = '4'
     AND SOME_ID = #{sgtId}
</select>





</mapper>